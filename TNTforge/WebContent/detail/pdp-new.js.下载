$(function(){var b=$(window),e=$.spice.getScrollbarWidth();dropdown();var d=true,j=true;$(window).on("resize.pdp",function(){var r=$(window).width()+e;var o=$(".events-scroll-wrap"),l=$(".events-scroll-wrap .scroll-gallery"),s=$(".events-scroll-wrap.events-scroll-wrap-con .scroll-gallery"),q=l.data("spice.kvScroll"),n=s.data("spice.kvScroll"),m=$(".events-scroll-wrap-con .events-scroll-loop"),p=m.data("spice.kvScroll");if(r>1024){if(p){p.destroy();m.removeData("spice.kvScroll");s.removeData("spice.kvScroll")}l.show().removeClass("pdp-scroll-gallery").addClass("axis-y pdp-scroll-gallery-y");if(d){q&&q.destroy();j=true;d=false}}else{if(r<=1024){s.show().removeClass("axis-y pdp-scroll-gallery-y").addClass("pdp-scroll-gallery");if(p){p.destroy()}if(j){n&&n.destroy();d=true;j=true;if(n){n.destroy();s.removeData("spice.kvScroll")}$.spice.kvScroll(m,{type:"scroll-loop",autoPlay:false,loop:true,btn:false,dot:{style:"dot"}});j=true;d=true}}else{if(n){n.destroy();s.removeData("spice.kvScroll")}if(!p){$.spice.kvScroll(m,{type:"scroll-loop",autoPlay:false,loop:true,btn:false,dot:{style:"dot"}});j=true;d=true}}}}).trigger("resize.pdp");$(".event-addtocart").on("tap",function(){$(this).find(".btn-bag-label").children("a").text("正在加入......");var l=$(this);setTimeout(function(){l.find(".btn-bag-label").children("a").text("已加入购物车");setTimeout(function(){l.find(".btn-bag-label").children("a").text("加入购物车")},2000)},1000)});$(".event-close").on("tap",function(){$(this).parent().siblings(".you-like-con").stop(true,true).slideToggle()});$(".event-select").on("tap",function(){if($(this).children("i").hasClass("icon-select")){$(this).children("i").removeClass("icon-select").addClass("icon-select-active");$(this).parent().siblings(".notice-smallbox").find("i").removeClass("icon-select-active").addClass("icon-select")}else{$(this).children("i").removeClass("icon-select-active").addClass("icon-select")}});var g=$.spice.dialog({template:$("#login-template").html(),dialogClass:"dialog-plplogin"});$(".icon-heart-event").on("tap",function(){g.show()});mobReset(function(){});pcReset(function(){});var f=$(window).width();if(f>1024){i("#main .pdp-gallery-list img");a();$("#side-scroll").removeAttr("style");$("#side-scroll").show();h(".style-section2",4);$(window).trigger("scroll")}else{$("#side-scroll").hide();i("#main .pdp-gallery-list .fullscreen-icon");a();c(".style-section",2);h(".style-section2",2);$("body").addClass("touchDevice")}!function(){var l=$("#sidebar-nav").find(".side-dot");var m=$("#main").find(".pdp-gallery-list");var n=$(".nav-container").height();$(window).scroll(function(){var p=$(window).innerWidth();if(p<=1024){return}var q=$(window).height();var r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;var u=(q/2)-($("#sidebar-nav").height()/2);var s=$("#main").offset().top+$("#main").outerHeight();var v=r+q-s;var w=s-u+n;if(v>u){$("#side-scroll").css({position:"absolute",top:w})}else{$("#side-scroll").removeAttr("style")}var t=$(".pdp-gallery-list"),o=$(".side-dot");t.each(function(){var x=$(this).index();if(o[t]){var y=$(".pdp-gallery-list");y.offset().top-$(window).height()/2<$(window).scrollTop()&&y.offset().top+y.height()-$(window).height()/2>$(window).scrollTop()?o[x].addClass("active"):"absolute"!==document.querySelector(".side-scroll").style.position&&o[x].removeClass("active")}});t.each(function(){if(q+r-$(this).offset().top>q/2){l.removeClass("active");l.eq($(this).index()).addClass("active").siblings().removeClass("active")}})});console.log(l);l.off("tap").on("tap",function(){var r=$(".top-notice").height();var p=$(".header").height();var o=$(".article-breadcrumb").height();var q=m.eq($(this).index()).offset().top-parseInt(r+p+o)-40+"px";console.log(q);$("body,html").animate({scrollTop:q},500);$(this).addClass("active").siblings().removeClass("active");return false})}();!function(){var l=$("#proselect-left"),o=$("#proselect-right"),m=b.scrollTop(),q=120,n=40,p;b.on("scroll.Y",function(z){var y=b.scrollTop();if(!$("body").hasClass("events-spice-standard")){m=y;return}var s=b.height(),r=o.outerHeight(),C=l.outerHeight(),w=y+s,t=o.offset().top,D=l.offset().top,A=o.outerHeight()+t,u=l.outerHeight()+D,v=D-y>0?D-y:100,B=w-u>0?w-u:0,x=s-v-B;if(r>C||y<D-q){if(p!=="init"){p="init";o.removeAttr("style")}m=y;return}if(x>r){if(p!=="small"){p="small";o.css({position:"fixed",bottom:"auto",top:q})}m=y;return}if(y>=m){if(w>u){if(p!==1){p=1;o.css({position:"absolute",top:"auto",bottom:n+"px"})}}else{if(w>A+n){if(p!==2){p=2;o.css({position:"fixed",top:"auto",bottom:n+"px"})}}else{if(p!==3&&p!==2){p=3;o.css({position:"absolute",bottom:"auto",top:t-D})}}}}else{if(y+q<=t){if(p!==4){p=4;o.css({position:"fixed",bottom:"auto",top:q})}}else{if(p!==5){p=5;o.css({position:"absolute",bottom:"auto",top:t-D})}}}m=y}).trigger("scroll.Y");b.on("resize",function(){p="resize";o.removeAttr("style");m=b.scrollTop();b.trigger("scroll.Y")});mobReset(function(){o.removeAttr("style")})}();function a(){$("#pdp-gallery-fullview").on("tap",function(){$("body").removeClass("fullview-open");$("#pdp-gallery-fullview").removeClass("show")})}function i(l){$(l).on("tap",function(){var m=$(this).parents(".pdp-gallery-list").index();console.log(m);var o=$(window).outerWidth();if(o>1024){m=m}else{m=m-1;console.log(m)}var n=$("#pdp-gallery-fullview .gallery-images a").eq(m).offset().top-45+"px";$("body").addClass("fullview-open");$("#pdp-gallery-fullview").addClass("show");$("#pdp-gallery-fullview").animate({scrollTop:n},0)})}$(window).on("resize",function(){$("body").removeClass("fullview-open");$("#pdp-gallery-fullview").removeClass("show")});function c(m,o){var l=$(".event-style-section1",m),o;k(l);$("ul",l).css({width:"100%"});$("li:lt("+o+")",l).css({width:(100/o)+"%"});$("li:gt("+(o-1)+")",l).addClass("none");var n=$(".style-scroll-section1 > ul > li",l).length;if(n>o){$.spice.tools.scrollGalleryRes({elem:l,options:{moveNum:o,easing:600,autoPlay:true,loop:true,time:3000,callBack:function(p){}}})}else{$("li:gt("+(o-1)+")",l).removeClass("none")}}function h(n,m){var l=$(".event-style-section2",n),m;k(l);$("ul",l).css({width:"100%"});$("li:lt("+m+")",l).css({width:(100/m)+"%"});$("li:gt("+(m-1)+")",l).addClass("none");var o=$(".style-scroll-section2 > ul > li",l).length;if(o>m){$.spice.tools.scrollGalleryRes({elem:l,options:{moveNum:m,easing:600,autoPlay:true,loop:true,time:3000,callBack:function(p){}}})}else{$("li:gt("+(m-1)+")",l).removeClass("none")}}function k(l){if($(l).data("spice.kvScroll")){$(l).data("spice.kvScroll").destroy()}}mobReset(function(){})});